<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>SwiftUI ç‹€æ…‹å±¬æ€§åŒ…è£å™¨èªªæ˜</title>
    <style>
        body {
            font-family: "SF Pro", "Helvetica Neue", Helvetica, Arial, sans-serif;
            background: #f7f7f7;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        h1, h2 {
            color: #1a73e8;
        }
        pre {
            background: #282c34;
            color: #ffffff;
            padding: 12px;
            overflow-x: auto;
            border-radius: 6px;
        }
        code {
            font-family: "SFMono-Regular", Consolas, "Courier New", monospace;
            font-size: 14px;
        }

        /* Syntax highlighting */
        .keyword { color: #c678dd; font-weight: bold; }
        .type { color: #61afef; }
        .property { color: #e5c07b; }
        .string { color: #98c379; }
        .comment { color: #5c6370; font-style: italic; }
        .function { color: #56b6c2; }
        .error { color: #e06c75; font-weight: bold; }
    </style>
</head>
<body>

<h1>SwiftUI ç‹€æ…‹å±¬æ€§åŒ…è£å™¨ç°¡ä»‹</h1>

<p>ä»¥ä¸‹æ˜¯ SwiftUI ä¸­å¹¾å€‹å¸¸ç”¨çš„å±¬æ€§åŒ…è£å™¨ï¼ˆProperty Wrappersï¼‰ï¼Œç”¨æ–¼ç®¡ç† View ä¸­çš„ç‹€æ…‹è³‡æ–™ï¼š</p>

<h2>ğŸ“Œ å¸¸è¦‹å±¬æ€§åŒ…è£å™¨æ¯”è¼ƒ</h2>

<table border="1" cellpadding="6" cellspacing="0">
    <tr>
        <th>å±¬æ€§åŒ…è£å™¨</th>
        <th>ç”¨é€”èªªæ˜</th>
    </tr>
    <tr>
        <td>@State</td>
        <td>ç®¡ç†æœ¬åœ°ç‹€æ…‹ï¼ŒView è‡ªå·±çš„ç‹€æ…‹å€¼ã€‚</td>
    </tr>
    <tr>
        <td>@Binding</td>
        <td>å¾çˆ¶ View å‚³å…¥è®Šæ•¸çš„åƒç…§ï¼Œç”¨ä¾†è®€å¯«çˆ¶å±¤çš„ @Stateã€‚</td>
    </tr>
    <tr>
        <td>@ObservedObject</td>
        <td>è§€å¯Ÿå¤–éƒ¨å¯è§€å¯Ÿç‰©ä»¶ï¼ˆå¦‚ ViewModelï¼‰çš„è³‡æ–™æ›´æ–°ã€‚</td>
    </tr>
    <tr>
        <td>@StateObject</td>
        <td>åœ¨ View ä¸­å‰µå»ºä¸¦æŒæœ‰ ObservableObjectã€‚</td>
    </tr>
    <tr>
        <td>@EnvironmentObject</td>
        <td>æ¥æ”¶å¾ä¸Šå±¤ç’°å¢ƒæ³¨å…¥çš„å…±äº«ç‰©ä»¶ã€‚</td>
    </tr>
</table>

<h2>âœ… ä½¿ç”¨ç¯„ä¾‹</h2>

<h3>1. <code>@State</code>ï¼ˆView çš„å…§éƒ¨ç‹€æ…‹ï¼‰</h3>
<pre><code>
<span class="keyword">struct</span> <span class="type">CounterView</span>: <span class="type">View</span> {
    <span class="keyword">@State</span> <span class="keyword">private</span> <span class="property">var</span> count = 0

    <span class="keyword">var</span> body: <span class="type">some View</span> {
        <span class="type">Button</span>(<span class="string">"Count: \(count)"</span>) {
            count += 1
        }
    }
}
</code></pre>
<h3>ğŸ§¨ å¦‚æœæ²’åŠ  @State å‘¢ï¼Ÿ</h3>
<pre><code>
<span class="keyword">struct</span> <span class="type">BrokenCounter</span>: <span class="type">View</span> {
    <span class="comment">// âš ï¸ å°‘äº† @State</span>
    <span class="keyword">private</span> <span class="property">var</span> count = 0

    <span class="keyword">var</span> body: <span class="type">some View</span> {
        <span class="type">Button</span>(<span class="string">"Count: \(count)"</span>) {
            count += 1
        }
    }
}
</code></pre>

<p>çµæœæœƒå‡ºç¾éŒ¯èª¤ï¼š</p>
<pre><code class="error">Cannot assign to property: 'count' is a 'let' constant</code></pre>
<p>é€™æ˜¯å› ç‚º SwiftUI çš„ View æ˜¯ structï¼Œå…§éƒ¨è®Šæ•¸é è¨­æ˜¯ immutableï¼Œè‹¥æ²’æœ‰ @Stateï¼ŒSwiftUI ä¸å…è¨±ä½ æ”¹è®Šå®ƒã€‚</p>

<hr>

<h3>2. <code>@Binding</code>ï¼ˆå­ View æ¥æ”¶çˆ¶ View çš„ç‹€æ…‹ï¼‰</h3>
<pre><code>
<span class="keyword">struct</span> <span class="type">ToggleView</span>: <span class="type">View</span> {
    <span class="keyword">@Binding</span> <span class="property">var</span> isOn: <span class="type">Bool</span>

    <span class="keyword">var</span> body: <span class="type">some View</span> {
        <span class="type">Toggle</span>(<span class="string">"é–‹é—œ"</span>, isOn: $isOn)
    }
}
</code></pre>

<h3>3. <code>@ObservedObject</code>ï¼ˆè§€å¯Ÿå¤–éƒ¨ç‰©ä»¶ï¼‰</h3>
<pre><code>
<span class="keyword">class</span> <span class="type">CounterModel</span>: <span class="type">ObservableObject</span> {
    <span class="keyword">@Published</span> <span class="property">var</span> count = 0
}

<span class="keyword">struct</span> <span class="type">MyView</span>: <span class="type">View</span> {
    <span class="keyword">@ObservedObject</span> <span class="property">var</span> model: <span class="type">CounterModel</span>

    <span class="keyword">var</span> body: <span class="type">some View</span> {
        <span class="type">Button</span>(<span class="string">"Count: \(model.count)"</span>) {
            model.count += 1
        }
    }
}
</code></pre>

<h3>4. <code>@StateObject</code>ï¼ˆView ä¸­å‰µå»º ViewModelï¼‰</h3>
<pre><code>
<span class="keyword">struct</span> <span class="type">MainView</span>: <span class="type">View</span> {
    <span class="keyword">@StateObject</span> <span class="property">private</span> <span class="property">var</span> model = <span class="type">CounterModel</span>()

    <span class="keyword">var</span> body: <span class="type">some View</span> {
        <span class="type">MyView</span>(model: model)
    }
}
</code></pre>

<h3>5. <code>@EnvironmentObject</code>ï¼ˆå…¨ app å…±äº«è³‡æ–™ï¼‰</h3>
<pre><code>
<span class="keyword">class</span> <span class="type">UserSettings</span>: <span class="type">ObservableObject</span> {
    <span class="keyword">@Published</span> <span class="property">var</span> username = <span class="string">"Guest"</span>
}

<span class="keyword">struct</span> <span class="type">ProfileView</span>: <span class="type">View</span> {
    <span class="keyword">@EnvironmentObject</span> <span class="property">var</span> settings: <span class="type">UserSettings</span>

    <span class="keyword">var</span> body: <span class="type">some View</span> {
        <span class="type">Text</span>(<span class="string">"Hello, \(settings.username)"</span>)
    }
}
</code></pre>

<p>App æ ¹éƒ¨æ³¨å…¥ï¼š</p>
<pre><code>
<span class="keyword">@main</span>
<span class="keyword">struct</span> <span class="type">MyApp</span>: <span class="type">App</span> {
    <span class="keyword">var</span> body: <span class="type">some Scene</span> {
        <span class="type">WindowGroup</span> {
            <span class="type">ProfileView</span>()
                .<span class="function">environmentObject</span>(<span class="type">UserSettings</span>())
        }
    }
}
</code></pre>

<hr>

<h2>â“ç‚ºä»€éº¼å‡½å¼ä¸ç”¨ @Stateï¼Ÿ</h2>

<p><strong>ç°¡çŸ­ç­”æ¡ˆï¼š</strong> å› ç‚ºå‡½å¼æ˜¯ã€Œè¡Œç‚ºã€ï¼Œä¸æ˜¯ã€Œè³‡æ–™ã€ã€‚å±¬æ€§åŒ…è£å™¨åªç”¨æ–¼è®Šæ•¸ä¸Šã€‚</p>

<pre><code>
<span class="comment">// âœ… ä¸éœ€è¦ @Stateï¼Œé€™åªæ˜¯è¡Œç‚ºé‚è¼¯</span>
<span class="keyword">func</span> <span class="function">sayHello</span>() {
    <span class="type">print</span>(<span class="string">"Hello!"</span>)
}

<span class="keyword">var</span> body: <span class="type">some View</span> {
    <span class="type">Button</span>(<span class="string">"Greet"</span>, action: sayHello)
}
</code></pre>

<p>å‡½å¼ä¸å„²å­˜ç‹€æ…‹ï¼Œä¹Ÿä¸å½±éŸ¿ UI æ›´æ–°ï¼Œå› æ­¤ä¸éœ€è¦ç”¨ç‹€æ…‹åŒ…è£å™¨ã€‚</p>

<pre><code>
<span class="comment">// âœ… å¯ä»¥åœ¨å‡½å¼å…§éƒ¨æ”¹è®Šç‹€æ…‹ï¼ˆä½†æ”¹çš„æ˜¯è®Šæ•¸ï¼‰</span>
<span class="keyword">@State</span> <span class="keyword">private</span> <span class="property">var</span> count = 0

<span class="keyword">func</span> <span class="function">increase</span>() {
    count += 1
}
</code></pre>

<p>é€™è£¡ UI é‚„æ˜¯æœƒæ›´æ–°ï¼Œå› ç‚ºä½ è®Šå‹•çš„æ˜¯è¢« <code>@State</code> ä¿®é£¾çš„è®Šæ•¸ã€‚</p>

</body>
</html>